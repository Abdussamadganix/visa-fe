<!-- navbar-->
<!-- Breadcrumb-->
<div class="breadcrumb-holder">
  <div class="container-fluid">
    <ul class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/dashboard">Home</a></li>
      <li class="breadcrumb-item active">Banks</li>
    </ul>
  </div>
</div>
<section>
  <div class="container-fluid">
    <!-- Page Header-->
    <header>
      <button data-toggle="modal" (click)="addNewBank()" *ngIf="isMainMerchant === 1" style="float: left; border-color: #272c4c !important; color: #272c4c !important;"
        type="button" data-toggle="modal" data-target="#inviteUserForm">Add Bank</button>
    </header>
    <div class="row" [ngSwitch]="whichForm">
      <div class="col-lg-12" *ngSwitchCase="'viewBank'">
          <div class="row" *ngIf="isMainMerchant === 1">
              <div class="col-md-4">
                <div class="form-group">
                  <label class="reg-label">Merchants <span style="color: red">*</span></label>
                  <select name="account" (change)="viewMerchantBank(0, $event.target.value)"   class="form-control">
                    <option value="" disabled selected>Select Merchant</option>
                    <option [value]="merchant.uniqueKey" *ngFor="let merchant of merchants">{{ merchant.name }}</option>
                  </select>
                  <!-- <input type="email" formControlName="email" placeholder="Business Type" class="form-control"> -->
                </div>
              </div>
            </div>
        <div class="card">
          <div class="card-header">
            <h4>Banks</h4>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>S/N</th>
                    <th>Image</th>
                    <th>Name</th>
                    <th *ngIf="isMainMerchant === 1">Date of Birth</th>
                    <th *ngIf="isMainMerchant === 1">Email</th>
                    <th *ngIf="isMainMerchant === 1">BVN</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody *ngIf="isMainMerchant === 1">
                  <tr *ngFor="let bank  of banks.banks let i = index" (click)="viewBank(bank)">
                    <td>{{ i + 1 }}</td>
                    <td><img height=20 src="{{ bank.logoUrl }}" /></td>
                    <td class="tb_btn"><a style="color: cadetblue;">{{ bank.bankName }}</a></td>
                    <td *ngIf="bank.isDateOfBirthRequired == 1 && isMainMerchant === 1">True</td>
                    <td *ngIf="bank.isDateOfBirthRequired == 0  && isMainMerchant === 1">False</td>
                    <td *ngIf="bank.isDateOfBirthRequired == null  && isMainMerchant === 1">False</td>
                    <td *ngIf="bank.isEmailRequired  == 1  && isMainMerchant === 1">True</td>
                    <td *ngIf="bank.isEmailRequired  == 0  && isMainMerchant === 1">False</td>
                    <td *ngIf="bank.isEmailRequired  == null  && isMainMerchant === 1">False</td>
                    <td *ngIf="bank.isBvnRequired == 1  && isMainMerchant === 1">True</td>
                    <td *ngIf="bank.isBvnRequired == 0 && isMainMerchant === 1">False</td>
                    <td *ngIf="bank.isBvnRequired == null && isMainMerchant === 1">False</td>
                    <td>{{ bank.status }}
                    </td>
                  </tr>
                </tbody>

                <tbody *ngIf="isMainMerchant === 0">
                  <tr *ngFor="let bank  of banks.banks let i = index">
                    <td>{{ i + 1 }}</td>
                    <td><img height=20 src="{{ bank.logoUrl }}" /></td>
                    <td class="tb_btn"><a style="color: cadetblue;">{{ bank.bankName }}</a></td>
                    <td *ngIf="bank.isDateOfBirthRequired == 1  && isMainMerchant === 1">True</td>
                    <td *ngIf="bank.isDateOfBirthRequired == 0 && isMainMerchant === 1">False</td>
                    <td *ngIf="bank.isEmailRequired  == 1 && isMainMerchant === 1">True</td>
                    <td *ngIf="bank.isEmailRequired  == 0 && isMainMerchant === 1">False</td>
                    <td *ngIf="bank.isBvnRequired == 1 && isMainMerchant === 1">True</td>
                    <td *ngIf="bank.isBvnRequired == 0 && isMainMerchant === 1">False</td>
                    <td> &nbsp;&nbsp;&nbsp;{{ bank.status }}&nbsp;&nbsp;&nbsp;
                      <span *ngIf=" bank.status === 'ACTIVE' else INACTIVE" style="float: left;" (click)="updateStatus(bank)">
                        <label class="switch">
                          <input type="checkbox" checked>
                          <span class="slider round"></span>
                        </label>
                      </span>
                      <ng-template #INACTIVE>
                          <span style="float: left;" (click)="updateStatus(bank)">
                              <label class="switch">
                                <input type="checkbox">
                                <span class="slider round"></span>
                              </label>
                            </span>
                        </ng-template>
                     
                    </td>
                  </tr>
                </tbody>

              </table>
              <nav aria-label="Page navigation example">
                <ul class="pagination">
                  <!-- <li class="page-item" *ngFor="let page of pages" (click)="listOfUsers(1)"><a class="page-link" href="#">Previous</a></li> -->
                  <li class="page-item" *ngIf=" pageNumber !== 1" (click)="getAllBanks(pageNum -1)"><a class="page-link">Previous</a></li>
                  <li class="page-item" *ngFor="let page of pages" (click)="getAllBanks(page)"><a class="page-link">{{page}}</a></li>

                  <li class="page-item" *ngIf="lastPage !== true" (click)="getAllBanks(pageNum +1)"><a class="page-link">Next</a></li>
                  <!-- <li class="page-item"><a class="page-link" href="#">Next</a></li> -->
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-12" *ngSwitchCase="'editBank'">
        <div class="card" *ngIf="isMainMerchant === 1">
          <div class="card-header d-flex align-items-center">
            <h4>Edit Bank</h4>
          </div>
          <div class="card-body">
            <form [formGroup]="bankForm" (ngSubmit)="updateBank(bankForm.value)" class="text-center">
              <div class="row">
                <div class="col-md-4">
                  <label for="logoUrl" style="float: left;">Bank Name</label>
                  <input appRegisterInputValidator class="form-control" type="logoUrl" formControlName="bankName" id="bankName">
                </div>
                <div class="col-md-4">
                  <label for="logoUrl" style="float: left;">Bank Code</label>
                  <input appRegisterInputValidator class="form-control" type="logoUrl" formControlName="bankCode" id="bankCode">
                </div>
                <div class="col-md-2">
                  <div class="form-group">
                    <br />
                    <span style="float: left;"> Date of Birth
                      <label class="switch">
                        <input formControlName="isDateOfBirthRequired" type="checkbox">
                        <span class="slider round"></span>
                      </label>
                    </span>
                  </div>
                </div>

                <div class="col-md-2">
                  <div class="form-group">
                    <br />
                    <span style="float: left;"> Email
                      <label class="switch">
                        <input formControlName="isEmailRequired" type="checkbox">
                        <span class="slider round"></span>
                      </label>
                    </span>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-8">
                  <div class="form-group">
                    <label for="logoUrl" style="float: left;">Logo Url</label>
                    <input appRegisterInputValidator class="form-control" type="logoUrl" formControlName="logoUrl" id="logoUrl">
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="form-group">
                    <br />
                    <span style="float: left;"> BVN
                      <label class="switch">
                        <input formControlName="isBvnRequired" type="checkbox">
                        <span class="slider round"></span>
                      </label>
                    </span>
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="form-group">
                    <br />
                    <span style="float: left;"> Status
                      <label class="switch">
                        <input formControlName="status" type="checkbox">
                        <span class="slider round"></span>
                      </label>
                    </span>
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="form-group">
                    <br />
                    <span style="float: left;">Visible on Gateway
                      <label class="switch">
                        <input formControlName="isVisibleToMerchantForPayment" type="checkbox">
                        <span class="slider round"></span>
                      </label>
                    </span>
                  </div>
                </div>
              </div>
              <div class="form-group" style="float: left;">
                <button (click)="goBack()" class="btn btn-secondary">Cancel</button> &nbsp;
                <input type="submit" value="Save Changes" class="btn btn-primary">
              </div>
              <!-- <div class="row">
               
              </div> -->
              <!-- <div class="form-group">
                <button (click)="goBack()" style="float: left;" class="btn btn-primary">Cancel</button>
                <button class="btn btn-primary" (click)="updateBank(bank)">Save Changes</button>
              </div> -->
            </form>
          </div>
        </div>

        <div class="card" *ngIf="isMainMerchant === 0">
          <div class="card-header d-flex align-items-center">
            <h4>Edit Bank</h4>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-2">
                <img src="{{ viewUserModel.logoUrl }}" style="height: 40px;" />
              </div>
              <div class="col-md-2">
                <div class="form-group">
                  <br />
                  <span style="float: left;"> Status
                    <label class="switch">
                      <input value="{{ viewUserModel.status }}" type="checkbox">
                      <span class="slider round"></span>
                    </label>
                  </span>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

      <!-- Addbank -->

      <div class="col-lg-12" *ngSwitchCase="'addNewBank'">
        <div class="card">
          <div class="card-header d-flex align-items-center">
            <h4>Add Bank</h4>
          </div>
          <div class="card-body">
            <form [formGroup]="addBankForm" (ngSubmit)="addBank(addBankForm.value)">
              <div class="row">
                <div class="col-md-8">
                  <div class="row">
                    <div class="col-md-6">
                      <label for="logoUrl" style="float: left;">Bank Name</label>
                      <input appRegisterInputValidator class="form-control" type="logoUrl" formControlName="name" id="name">
                    </div>
                    <div class="col-md-6">
                      <label for="logoUrl" style="float: left;">Bank Code</label>
                      <input appRegisterInputValidator class="form-control" type="logoUrl" formControlName="bankCode"
                        id="bankCode">
                    </div>
                    <div class="col-md-12">
                      <div class="form-group">
                        <label for="logoUrl" style="float: left;">Logo Url</label>
                        <input appRegisterInputValidator class="form-control" type="logoUrl" formControlName="logoUrl"
                          id="logoUrl">
                      </div>
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        <label>BVN</label>
                        <label class="switch" style="float: right;">
                          <input (onchange)='onCheckboxChange($event)' formControlName="isBvnRequired"
                            type="checkbox" data-on="Enabled">
                          <span class="slider round"></span>
                        </label>
                      </div>
                    </div>
                    <div class="col-md-12">
                      <div class="form-group">
                        <label>Status</label>
                        <label class="switch" style="float: right;">
                          <input (onchange)='onCheckboxChange($event)' formControlName="status"
                            type="checkbox">
                          <span class="slider round"></span>
                        </label>
                      </div>
                    </div>
                    <div class="col-md-12">
                      <div class="form-group">
                        <label>Email</label>
                        <label class="switch" style="float: right;">
                          <input (onchange)='onCheckboxChange($event)' formControlName="isEmailRequired"
                            type="checkbox">
                          <span class="slider round"></span>
                        </label>
                      </div>
                    </div>
                    <div class="col-md-12">
                      <div class="form-group">
                        <label>Internet Banking</label>
                        <label class="switch" style="float: right;">
                          <input (onchange)='onCheckboxChange($event)' formControlName="canBeUsedForInternetBanking"
                            type="checkbox">
                          <span class="slider round"></span>
                        </label>
                      </div>
                    </div>

                    <div class="col-md-12">
                      <div class="form-group">
                        <label>Date of Birth</label>
                        <label class="switch" style="float: right;">
                          <input (onchange)='onCheckboxChange($event)' formControlName="isDateOfBirthRequired"
                            type="checkbox">
                          <span class="slider round"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <button (click)="goBack()" class="btn btn-secondary">Cancle</button> &nbsp;
                <input type="submit" value="Save" class="btn btn-primary">
              </div>
            </form>
            <!-- <div class="col-lg-12" *ngSwitchCase="'addNewRole'">
        <div class="card">
          <div class="card-header d-flex align-items-center">
            <h4>Add Role</h4>
          </div>
          <div class="card-body"> -->

          </div>
        </div>
      </div>
    </div>
  </div>
</section>
