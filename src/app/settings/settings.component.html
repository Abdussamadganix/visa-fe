<div class="breadcrumb-holder">
  <div class="container-fluid">
    <ul class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/dashboard">Home</a></li>
      <li class="breadcrumb-item active">Settings</li>
    </ul>
  </div>
</div>

<section>
  <div class="container-fluid">
    <!-- Page Header-->
    <header>
    </header>


    <div class="alert alert-success alert-dismissible fade show" role="alert">
      <small>This feature will enable you to edit/confirm your personal details, business details, load API keys, enter
        your bank account details and upload required documents for verification.</small>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <section id="tabs" class="project-tab">
      <div class="row">
        <div class="col-md-12">
          <nav>
            <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
              <a class="nav-item  nav-link active" (click)="getUser()" id="nav-personal-tab" data-toggle="tab"
                href="#nav-personal" role="tab" aria-controls="nav-personal" aria-selected="true">Personal
                Information</a>
              <a class="nav-item nav-link " (click)="getMerchant()" id="nav-business-tab" data-toggle="tab"
                href="#nav-business" role="tab" aria-controls="nav-business" aria-selected="true">Business
                Information</a>
              <a class="nav-item nav-link" (click)="getMerchant()" id="nav-api-tab" data-toggle="tab" href="#nav-api"
                role="tab" aria-controls="nav-api" aria-selected="true">Api</a>
              <a class="nav-item nav-link" (click)="bankAccountInfo()" id="nav-account-tab" data-toggle="tab"
                href="#nav-account" role="tab" aria-controls="nav-account" aria-selected="false">Bank Account</a>
              <a class="nav-item nav-link" (click)="paymentSetup()" id="nav-contact-tab" data-toggle="tab"
                href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">Payment Setup</a>
            </div>
          </nav>
          <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-personal" role="tabpanel" aria-labelledby="nav-personal-tab">
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-header">
                      <h4>Personal Information
                      </h4>
                    </div>
                    <div class="card-body">
                      <form [formGroup]="personalInfoForm" (ngSubmit)="updatePersonalInfo(personalInfoForm.value)">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>First Name</label>
                              <input type="text" formControlName="firstName" placeholder="First Name"
                                class="form-control">
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Last name</label>
                              <input type="text" formControlName="lastName" placeholder="Last Name"
                                class="form-control">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Email Address</label>
                              <input type="text" formControlName="email" placeholder="Email Address"
                                class="form-control">
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Phone Number</label>
                              <input type="text" formControlName="phone" placeholder="Phone numbers"
                                class="form-control">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Address</label>
                              <input type="text" formControlName="address" placeholder="Address" class="form-control">
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <input type="submit" value="Save Changes" class="btn btn-primary">
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-header">
                      <h4>Change Password
                      </h4>
                    </div>
                    <div class="card-body">
                      <form [formGroup]="changePasswordForm" (ngSubmit)="changePassword(changePasswordForm.value)">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Current Password</label>
                              <input type="password" formControlName="currentPassword" placeholder="Current Password"
                                class="form-control">
                              <div *ngIf="submitted && f.currentPassword.errors" class="invalid-feedback">
                                <div *ngIf="f.currentPassword.errors.required">Current password is required</div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Password</label>
                              <input type="password" appRegisterInputValidator formControlName="password"
                                placeholder="New Password" class="form-control">
                              <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                                <div *ngIf="f.password.errors.required">Password is required</div>
                                <div *ngIf="changePasswordForm.get('password').hasError('invalidPassword') ">
                                  Passwords must have at least 7 characters and must contain an uppercase letter,
                                  lowercase letter, numbers, and special character
                                </div>
                              </div>
                              <password-strength-meter [password]="password.value"
                                (strengthChange)="onPasswordStrengthChanged($event)"></password-strength-meter>
                              <!-- <div style="float: left; color: red; font-size: 14px; margin-top: 1px;"
                                *ngIf="(submitted && f.password.errors) || changePasswordForm.get('password').hasError('required') && changePasswordForm.get('password').touched"
                                class="invalid-feedback">
                                <div *ngIf="f.password.errors.required" class="align-text-left">Password is required
                                </div>
                                <div style="float: left; color: red; font-size: 14px;"
                                  *ngIf="submitted && changePasswordForm.get('password').hasError('invalidPassword') ">
                                  Passwords must have at least 7 characters and must contain an uppercase letter,
                                  lowercase letter, numbers, and special character
                                </div>
                              </div> -->
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Confirm Password</label>
                              <input type="password" formControlName="confirmPassword" placeholder="Confirm Password"
                                class="form-control">
                              <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
                                <div *ngIf="f.confirmPassword.errors.required">Confirm password is required</div>
                                <div *ngIf="f.confirmPassword.errors.mustMatch">Confirm Passwords must match password
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <input type="submit" value="Change Password" class="btn btn-primary">
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="nav-business" role="tabpanel" aria-labelledby="nav-business-tab">
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-header">
                      <h4>Business Information</h4>
                    </div>
                    <div class="card-body">
                      <form [formGroup]="businessInfoForm" (ngSubmit)="updateMerchant(businessInfoForm.value)">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Business Name</label>
                              <input type="text" formControlName="businessName" placeholder="Business Name"
                                class="form-control">
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Phone Number</label>
                              <input type="text" formControlName="businessPhoneNumber" placeholder="Phone Number"
                                class="form-control">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Business Email</label>
                              <input type="text" formControlName="businessEmail" placeholder="Business Email Address"
                                class="form-control">
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Business Address</label>
                              <input type="text" formControlName="businessAddress" placeholder="Business Address"
                                class="form-control">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Business Number</label>
                              <input type="text" formControlName="businessNumber" placeholder="Business Number"
                                class="form-control">
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <input type="submit" value="Save Changes" class="btn btn-primary">
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="nav-api" role="tabpanel" aria-labelledby="nav-api-tab">
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-header">
                      <h4>API Keys</h4>
                    </div>
                    <div class="card-body">
                      <form [formGroup]="merchantKeyInfoForm">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Public Key</label>
                              <input type="text" id="publicKey" title="click to copy!" readonly
                                formControlName="publicKey" placeholder="Public Key" class="form-control">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Secret Key</label>
                              <input type="text" id="privateKey" title="click to copy!" readonly
                                formControlName="privateKey" placeholder="Secret Key" class="form-control">
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="nav-account" role="tabpanel" aria-labelledby="nav-account-tab">
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-header">
                      <h4>Personal Information
                      </h4>
                    </div>
                    <div class="card-body">
                      <form [formGroup]="bankAccountForm" (ngSubmit)="updateBankAccountInfo(bankAccountForm.value)">
                        <!-- <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Account Name</label>
                              <input type="text" formControlName="settlementAccountName" placeholder="Account Name"
                                class="form-control">
                            </div>
                          </div>
                        </div> -->
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Account number</label>
                              <input type="text" formControlName="settlementAccountNumber" placeholder="Account Number"
                                class="form-control">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Select Bank</label>
                              <select class="form-control" id="bankCode" formControlName="bankCode">
                                <option value="bankCode" disabled selected>Select Bank</option>
                                <option *ngFor="let bank of banks" value="{{bank.bankCode}}"
                                  style="color: black !important;">{{bank.bankName}}</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <input type="submit" value="Save Changes" class="btn btn-primary">
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
                    <div class="card-header">
                      <h4> Payment Channel Setup </h4>
                      <small>This feature will enable you to setup banks and channels that will be accessible to
                        customers
                        for payments.</small>
                    </div>
                    <div class="card-body">
                      <form [formGroup]="paymentSetupForm" (ngSubmit)="updatePaymentSetup(paymentSetupForm.value)">
                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <label>Account Payment</label>
                              <label class="switch" style="float: right;">
                                <input (click)="updateAccount()" formControlName="accountPayment" type="checkbox">
                                <span class="slider round"></span>
                              </label>
                              <span *ngIf="merchantBusinessInfo.accountPayment == 'ACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">ON</span>
                              <span *ngIf="merchantBusinessInfo.accountPayment == 'INACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">OFF</span>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <label>QR Payment</label>
                              <label class="switch" style="float: right;">
                                <input (change)="updateQr($event.target.value)" formControlName="qrPayment"
                                  type="checkbox">
                                <span class="slider round"></span>
                              </label>
                              <span *ngIf="merchantBusinessInfo.qrPayment == 'ACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">ON</span>
                              <span *ngIf="merchantBusinessInfo.qrPayment == 'INACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">OFF</span>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <label>USSD Payment</label>
                              <label class="switch" style="float: right;">
                                <input (change)="updateUssd()" formControlName="ussdPayment" type="checkbox">
                                <span class="slider round"></span>
                              </label>
                              <span *ngIf="merchantBusinessInfo.ussdPayment == 'ACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">ON</span>
                              <span *ngIf="merchantBusinessInfo.ussdPayment == 'INACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">OFF</span>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <label>Wallet Payment</label>
                              <label class="switch" style="float: right;">
                                <input (change)="updateWallet()" formControlName="walletPayment" type="checkbox">
                                <span class="slider round"></span>
                              </label>
                              <span *ngIf="merchantBusinessInfo.walletPayment == 'ACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">ON</span>
                              <span *ngIf="merchantBusinessInfo.walletPayment == 'INACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">OFF</span>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <label>Card Payment</label>
                              <label class="switch" style="float: right;">
                                <input (change)="updatecard()" formControlName="cardPayment" type="checkbox">
                                <span class="slider round"></span>
                              </label>
                              <span *ngIf="merchantBusinessInfo.cardPayment == 'ACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">ON</span>
                              <span *ngIf="merchantBusinessInfo.cardPayment == 'INACTIVE'"
                                style="float: right; margin-right: 2px; color: rgb(79, 84, 79);">OFF</span>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="form-group">
                          <input type="submit" value="Save Changes" class="btn btn-primary">
                        </div> -->
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row" [ngSwitch]="whichForm">
                <div class="col-lg-12" *ngSwitchCase="'viewBank'">
                  <div class="card">
                    <div class="card-header">
                      <h4>Bank Setup </h4>
                      <div class="row" *ngIf="isMainMerchant === 1">
                        <div class="col-md-4">
                          <div class="form-group">
                            <label class="reg-label">Merchants <span style="color: red">*</span></label>
                            <select name="account" (change)="viewMerchantBank(0, $event.target.value)"
                              class="form-control">
                              <option value="" disabled selected>Select Merchant</option>
                              <option [value]="merchant.uniqueKey" *ngFor="let merchant of merchants">
                                {{ merchant.name }}</option>
                            </select>
                            <!-- <input type="email" formControlName="email" placeholder="Business Type" class="form-control"> -->
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card-body">
                      <div class="table-responsive">
                        <table class="table table-striped table-hover">
                          <thead>
                            <tr>
                              <th>S/N</th>
                              <th>Image</th>
                              <th>Name</th>
                              <th *ngIf="isMainMerchant === 1">Date of Birth</th>
                              <th *ngIf="isMainMerchant === 1">Email</th>
                              <th *ngIf="isMainMerchant === 1">BVN</th>
                              <th>Status</th>
                            </tr>
                          </thead>
                          <tbody *ngIf="isMainMerchant === 1">
                            <tr *ngFor="let bank  of  allBanks.banks let i = index" (click)="viewBank(bank)">
                              <td>{{ i + 1 }}</td>
                              <td><img height=20 src="{{ bank.logoUrl }}" /></td>
                              <td class="tb_btn"><a style="color: cadetblue;">{{ bank.bankName }}</a></td>
                              <td *ngIf="bank.isDateOfBirthRequired == 1 && isMainMerchant === 1">True</td>
                              <td *ngIf="bank.isDateOfBirthRequired == 0  && isMainMerchant === 1">False</td>
                              <td *ngIf="bank.isDateOfBirthRequired == null  && isMainMerchant === 1">False</td>
                              <td *ngIf="bank.isEmailRequired  == 1  && isMainMerchant === 1">True</td>
                              <td *ngIf="bank.isEmailRequired  == 0  && isMainMerchant === 1">False</td>
                              <td *ngIf="bank.isEmailRequired  == null  && isMainMerchant === 1">False</td>
                              <td *ngIf="bank.isBvnRequired == 1  && isMainMerchant === 1">True</td>
                              <td *ngIf="bank.isBvnRequired == 0 && isMainMerchant === 1">False</td>
                              <td *ngIf="bank.isBvnRequired == null && isMainMerchant === 1">False</td>
                              <td>{{ bank.status }}
                              </td>
                            </tr>
                          </tbody>

                          <tbody *ngIf="isMainMerchant === 0">
                            <tr *ngFor="let bank  of allBanks.banks let i = index">
                              <td>{{ i + 1 }}</td>
                              <td><img height=20 src="{{ bank.logoUrl }}" /></td>
                              <td class="tb_btn"><a style="color: cadetblue;">{{ bank.bankName }}</a></td>
                              <td *ngIf="bank.isDateOfBirthRequired == 1  && isMainMerchant === 1">True</td>
                              <td *ngIf="bank.isDateOfBirthRequired == 0 && isMainMerchant === 1">False</td>
                              <td *ngIf="bank.isEmailRequired  == 1 && isMainMerchant === 1">True</td>
                              <td *ngIf="bank.isEmailRequired  == 0 && isMainMerchant === 1">False</td>
                              <td *ngIf="bank.isBvnRequired == 1 && isMainMerchant === 1">True</td>
                              <td *ngIf="bank.isBvnRequired == 0 && isMainMerchant === 1">False</td>
                              <td> &nbsp;&nbsp;&nbsp;{{ bank.status }}&nbsp;&nbsp;&nbsp;
                                <span *ngIf=" bank.status === 'ACTIVE' else INACTIVE" style="float: left;"
                                  (click)="updateStatus(bank)">
                                  <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider round"></span>
                                  </label>
                                </span>
                                <ng-template #INACTIVE>
                                  <span style="float: left;" (click)="updateStatus(bank)">
                                    <label class="switch">
                                      <input type="checkbox">
                                      <span class="slider round"></span>
                                    </label>
                                  </span>
                                </ng-template>

                              </td>
                            </tr>
                          </tbody>

                        </table>
                        <nav aria-label="Page navigation example">
                          <ul class="pagination">
                            <!-- <li class="page-item" *ngFor="let page of pages" (click)="listOfUsers(1)"><a class="page-link" href="#">Previous</a></li> -->
                            <li class="page-item" *ngIf=" pageNumber !== 1" (click)="getAllBanks(pageNum -1)"><a
                                class="page-link">Previous</a></li>
                            <li class="page-item" *ngFor="let page of pages" (click)="getAllBanks(page)"><a
                                class="page-link">{{page}}</a></li>

                            <li class="page-item" *ngIf="lastPage !== true" (click)="getAllBanks(pageNum +1)"><a
                                class="page-link">Next</a></li>
                            <!-- <li class="page-item"><a class="page-link" href="#">Next</a></li> -->
                          </ul>
                        </nav>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-12" *ngSwitchCase="'editBank'">
                  <div class="card">
                    <div class="card-header">
                      <h4>Bank Setup </h4>
                    </div>
                    <div class="card-body">
                      <form [formGroup]="bankForm" (ngSubmit)="updateBank(bankForm.value)" class="text-center">
                        <div class="row">
                          <div class="col-md-4">
                            <label for="logoUrl" style="float: left;">Bank Name</label>
                            <input appRegisterInputValidator class="form-control" type="logoUrl"
                              formControlName="bankName" id="bankName">
                          </div>
                          <div class="col-md-4">
                            <label for="logoUrl" style="float: left;">Bank Code</label>
                            <input appRegisterInputValidator class="form-control" type="logoUrl"
                              formControlName="bankCode" id="bankCode">
                          </div>
                          <div class="col-md-2">
                            <div class="form-group">
                              <br />
                              <span style="float: left;"> Date of Birth
                                <label class="switch">
                                  <input formControlName="isDateOfBirthRequired" type="checkbox">
                                  <span class="slider round"></span>
                                </label>
                              </span>
                            </div>
                          </div>

                          <div class="col-md-2">
                            <div class="form-group">
                              <br />
                              <span style="float: left;"> Email
                                <label class="switch">
                                  <input formControlName="isEmailRequired" type="checkbox">
                                  <span class="slider round"></span>
                                </label>
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-8">
                            <div class="form-group">
                              <label for="logoUrl" style="float: left;">Logo Url</label>
                              <input appRegisterInputValidator class="form-control" type="logoUrl"
                                formControlName="logoUrl" id="logoUrl">
                            </div>
                          </div>
                          <div class="col-md-2">
                            <div class="form-group">
                              <br />
                              <span style="float: left;"> BVN
                                <label class="switch">
                                  <input formControlName="isBvnRequired" type="checkbox">
                                  <span class="slider round"></span>
                                </label>
                              </span>
                            </div>
                          </div>
                          <div class="col-md-2">
                            <div class="form-group">
                              <br />
                              <span style="float: left;"> Status
                                <label class="switch">
                                  <input formControlName="status" type="checkbox">
                                  <span class="slider round"></span>
                                </label>
                              </span>
                            </div>
                          </div>
                          <div class="col-md-2">
                            <div class="form-group">
                              <br />
                              <span style="float: left;">Visible on Gateway
                                <label class="switch">
                                  <input formControlName="isVisibleToMerchantForPayment" type="checkbox">
                                  <span class="slider round"></span>
                                </label>
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="form-group" style="float: left;">
                          <button (click)="goBack()" class="btn btn-secondary">Cancel</button> &nbsp;
                          <input type="submit" value="Save Changes" class="btn btn-primary">
                        </div>
                        <!-- <div class="row">
                             
                            </div> -->
                        <!-- <div class="form-group">
                              <button (click)="goBack()" style="float: left;" class="btn btn-primary">Cancel</button>
                              <button class="btn btn-primary" (click)="updateBank(bank)">Save Changes</button>
                            </div> -->
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</section>
